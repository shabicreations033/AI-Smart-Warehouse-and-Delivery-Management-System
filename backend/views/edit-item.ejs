<%- include('partials/header') %>
<%- include('partials/navbar') %>

<main>
  <form action="/inventory/edit/<%= item._id %>" method="POST">
    <h2>Edit Item: <%= item.name %></h2>
    
    <% if (error) { %><div class="feedback-box error-box"><%= error %></div><% } %>

    <label for="stockId">Stock Name (Category)</label>
    <select id="stockId" name="stockId" required>
        <% allStocks.forEach(stock => { %>
            <option value="<%= stock._id %>" <%= item.stockId.equals(stock._id) ? 'selected' : '' %>>
                <%= stock.name %>
            </option>
        <% }) %>
    </select>

    <label for="sku">SKU</label>
    <input type="text" id="sku" name="sku" value="<%= item.sku %>" required />

    <label for="price">Price (per unit)</label>
    <input type="number" id="price" name="price" value="<%= item.price.toFixed(2) %>" min="0" step="0.01" required />

    <label for="totalStock">Total Stock (Cumulative)</label>
    <input type="number" id="totalStock" name="totalStock" value="<%= item.totalStock %>" min="0" required />

    <label for="availableStock">Available Stock (On Hand)</label>
    <input type="number" id="availableStock" name="availableStock" value="<%= item.availableStock %>" min="0" required />

    <label for="location">Warehouse Location</label>
    <input type="text" id="location" name="location" value="<%= item.location || '' %>" />

    <button type="submit" class="btn btn-primary">Save Changes</button>
  </form>
</main>

<%- include('partials/footer') %>